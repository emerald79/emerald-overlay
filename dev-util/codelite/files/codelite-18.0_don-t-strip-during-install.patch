From 41d074550a122209f0f6065397364d7613834076 Mon Sep 17 00:00:00 2001
From: Dirk Schoebel <dirk@liji.de>
Date: Fri, 16 Jan 2026 10:03:39 +0100
Subject: [PATCH] don't strip during install

---
 CMakeLists.txt | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0d241ba..fcbef76 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -666,7 +666,7 @@ if(CMAKE_BUILD_TYPE MATCHES Debug OR CMAKE_BUILD_TYPE MATCHES DebugFull)
 else()
   message("-- Building in Release mode")
   set(DEBUG_BUILD 0)
-  set(CMAKE_INSTALL_DO_STRIP TRUE)
+  set(CMAKE_INSTALL_DO_STRIP FALSE)
   message("-- CMAKE_INSTALL_DO_STRIP is " ${CMAKE_INSTALL_DO_STRIP})
   if(UNIX AND NOT APPLE)
     # Avoid hardening-no-relro wrarning message from lintian
@@ -691,7 +691,6 @@ else()
       add_definitions(${EXTRA_CPPFLAGS})
       set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${EXTRA_CFLAGS}")
       set(LINKER_OPTIONS "${EXTRA_LDFLAGS}")
-      list(APPEND LINKER_OPTIONS "-s") # strip binaries
     endif()
   endif()
 
@@ -717,9 +716,6 @@ else()
     "-- Shared Objects will be written into ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
 
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O2") # Optimize
-  if(CMAKE_COMPILER_IS_GNUCXX)
-    set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -s") # Strip binary
-  endif(CMAKE_COMPILER_IS_GNUCXX)
 
   # In release, add NDEBUG unless explicitly told not to
   if(NOT PREVENT_WX_ASSERTS MATCHES 0)
-- 
2.52.0

